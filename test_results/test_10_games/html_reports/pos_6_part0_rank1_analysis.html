<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Position 6 Analysis</title>
    
    <!-- Besogo CSS and JS -->
    <link rel="stylesheet" href="besogo/besogo.css">
    <link rel="stylesheet" href="besogo/board-flat.css">
    <link rel="stylesheet" href="besogo/analysis-styles.css">
    <script src="besogo/besogo.all.js"></script>
</head>
<body>
    <div class="github-header">
        <a href="https://github.com/lets-getitnow/ai_go_explain" target="_blank" rel="noopener noreferrer">
            <svg class="github-logo" viewBox="0 0 24 24">
                <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
            </svg>
            <span class="project-name">ai_go_explain</span>
            <span>View on GitHub</span>
        </a>
    </div>
    <div class="container">
        <div class="header">
            <h1>Position 6 Analysis</h1>
            <div class="subtitle">Part 0, Rank 1 - NMF Part Analysis</div>
            <div class="timestamp" style="color: #ffffff; font-size: 0.9em; margin-top: 5px; font-weight: 500; text-shadow: 1px 1px 2px rgba(0,0,0,0.3);">Generated: 2025-08-01 23:03:16</div>
        </div>
        
        <div class="position-navigation">
            <a href="pos_0_part3_rank1_analysis.html" class="nav-button"  data-tooltip="Position 0 (Part 3, Rank 1)">‚èÆ First Position</a>
            <a href="pos_5_part0_rank1_analysis.html" class="nav-button"  data-tooltip="Position 5 (Part 0, Rank 1)">‚Üê Previous Position</a>
            <span class="position-counter">Position 6 of 10</span>
            <a href="pos_7_part0_rank1_analysis.html" class="nav-button"  data-tooltip="Position 7 (Part 0, Rank 1)">Next Position ‚Üí</a>
            <a href="pos_9_part0_rank1_analysis.html" class="nav-button"  data-tooltip="Position 9 (Part 0, Rank 1)">Last Position ‚è≠</a>
            <span class="keyboard-hint" style="font-size: 0.8em; color: #666; margin-left: 10px;">(Use ‚Üê ‚Üí arrow keys)</span>
        </div>
        
        <div class="content">
            <div class="board-section">
                <div class="position-highlight">
                    <strong>Move of Interest:</strong> II at Turn 6
                    <br><strong>Activation Strength:</strong> 1293.9834
                </div>
                
                <div class="current-move-display">
                    <strong>Current Move:</strong> <span id="current-move-display">Turn 6</span>
                </div>
                
                <!-- Besogo Go Board -->
                <div class="besogo-viewer" 
                     size="13" 
                     coord="western"
                     panels="control+names"
                     orient="portrait"
                     portratio="none">(;GM[1]SZ[13]KM[7]RU[Chinese]PB[naotin15 (2408)]PW[kannwahokann (2100)];B[id];W[];B[ej];W[];B[ji];W[jj];B[ij];W[ii];B[ki];W[fj];B[ik];W[ek];B[dk];W[dj];B[ei];W[ck];B[dl];W[cl];B[el];W[fk];B[cj];W[di];B[bj];W[fi];B[eh];W[dh];B[dg];W[eg];B[fh];W[ch];B[cg];W[bh];B[bk];W[fl];B[bl];W[ef];B[gh];W[bg];B[ih];W[hi];B[hh];W[il];B[jl];W[hl];B[jk];W[gm];B[de];W[df];B[ce];W[cf];B[fd];W[jd];B[je];W[ie];B[hd];W[jc];B[ke];W[ld];B[be];W[gd];B[gc];W[ge];B[fe];W[he];B[hc];W[ff];B[if];W[ee];B[ed];W[fc];B[ec];W[fb];B[eb];W[hf];B[hg];W[gf];B[kd];W[kc];B[le];W[jf];B[kg];W[cc];B[dd];W[db];B[gb];W[ac];B[bb];W[bc];B[ib];W[jb];B[lc];W[lb];B[md];W[ha];B[ia];W[ja];B[ic];W[fa];B[ea];W[kj];B[lj];W[li];B[kk];W[kh];B[ig];W[lg];B[jh];W[kf];B[lf];W[mc];B[mb];W[me];B[mf];W[lk];B[ll];W[jj];B[kj];W[cm];B[bm];W[hj];B[im];W[km];B[jm];W[ml];B[bf];W[mj];B[cb];W[];B[ab];W[];B[hk];W[];B[gi];W[];B[gj];W[];B[gk];W[];B[fg];W[];B[gg];W[];B[dg];W[];B[cg];W[];B[ka];W[];B[kb];W[];B[mk];W[];B[mi];W[];B[mm];W[];B[lh];W[];B[gl];W[];B[fm];W[];B[hm];W[];B[mg];W[];B[jg];W[];B[ga]C[Human game position - Move 6 highlighted])</div>
            </div>
            
            <div class="analysis-section">
                <div class="analysis-card">
                    <h3>üß† NMF Part Analysis</h3>
                    <div class="data-grid">
                        <div class="data-item">
                            <span class="data-label" data-tooltip="Index of the NMF part that this activation belongs to. Parts partition the model into sets of interpretable patterns.">Part: <span class="tooltip-icon">‚ìò</span></span>
                            <span class="data-value">0</span>
                        </div>
                        <div class="data-item">
                            <span class="data-label" data-tooltip="Rank of this position within the part, ordered by activation strength (1 = strongest example of this component).">Rank: <span class="tooltip-icon">‚ìò</span></span>
                            <span class="data-value">1</span>
                        </div>
                        <div class="data-item">
                            <span class="data-label" data-tooltip="Unique identifier for this position in the entire dataset, useful for cross-referencing analyses and SGF files.">Global Position: <span class="tooltip-icon">‚ìò</span></span>
                            <span class="data-value">6</span>
                        </div>
                        <div class="data-item">
                            <span class="data-label" data-tooltip="Percentile of the activation strength when compared with ALL positions in the dataset (e.g. 99 % means stronger than 99 % of positions).">Activation Percentile: <span class="tooltip-icon">‚ìò</span></span>
                            <span class="data-value">33.64%</span>
                        </div>
                    </div>
                    
                    <div>
                        <strong data-tooltip="Raw activation value (0-1) output by the model for this component at this move; higher values indicate the pattern is strongly present in the board position.">Activation Strength: 1293.9834 <span class="tooltip-icon">‚ìò</span></strong>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 129398.3%"></div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 15px;">
                        <strong data-tooltip="How many convolutional channels fired above threshold and which ones; gives a low-level view of network attention on the board.">Channel Activity (0 active channels) <span class="tooltip-icon">‚ìò</span></strong>
                        <div class="channel-activity">
                            <div>No channel activity data available</div>
                        </div>
                    </div>
                </div>
                
                <div class="analysis-card">
                    <h3>üéØ Go Pattern Analysis</h3>
                    <div class="data-grid">
                        <div class="data-item">
                            <span class="data-label" data-tooltip="Classification of the move type (normal, ko, ladder, etc.).">Move Type: <span class="tooltip-icon">‚ìò</span></span>
                            <span class="data-value">Normal</span>
                        </div>
                        <div class="data-item">
                            <span class="data-label" data-tooltip="Game phase when this position occurred (opening, middle_game, endgame).">Game Phase: <span class="tooltip-icon">‚ìò</span></span>
                            <span class="data-value">Opening</span>
                        </div>
                    </div>
                </div>
                
                <div class="analysis-card">
                    <h3>üìä Part Comparison</h3>
                    <div class="data-grid">
                        <div class="data-item">
                            <span class="data-label" data-tooltip="Measure (0-1) of how distinct this part's activation pattern is compared to other parts ‚Äì higher means less overlap.">Uniqueness Score: <span class="tooltip-icon">‚ìò</span></span>
                            <span class="data-value">0.6430</span>
                        </div>
                        <div class="data-item">
                            <span class="data-label" data-tooltip="Ordering of parts by average activation strength across all positions, where 1 is the most frequently strongest pattern.">Part Rank: <span class="tooltip-icon">‚ìò</span></span>
                            <span class="data-value">1</span>
                        </div>
                        <div class="data-item">
                            <span class="data-label" data-tooltip="Highest activation value among ALL other parts at this position ‚Äì used to assess selectivity of the current part.">Max Other Activation: <span class="tooltip-icon">‚ìò</span></span>
                            <span class="data-value">461.9988</span>
                        </div>
                    </div>
                    
                    <div>
                        <strong data-tooltip="Bar chart of activation values for EVERY part so you can see the full activation profile of this position.">Activation in All Parts: <span class="tooltip-icon">‚ìò</span></strong>
                        
        <div style="margin: 5px 0;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <a href="pos_0_part3_rank1_analysis.html" style="text-decoration: none; color: inherit; cursor: pointer;" 
                   title="View strongest example of Part 3 (Position 0, Rank 1)">
                    <span>Part 3:</span>
                </a>
                <span>461.9988</span>
            </div>
            <a href="pos_0_part3_rank1_analysis.html" style="text-decoration: none; color: inherit; cursor: pointer;" 
               title="View strongest example of Part 3 (Position 0, Rank 1)">
                <div class="progress-bar" style="cursor: pointer;">
                    <div class="progress-fill" style="width: 46199.9%"></div>
                </div>
            </a>
        </div>

        <div style="margin: 5px 0;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span>Part 2:</span>
                <span>199.2460</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" style="width: 19924.6%"></div>
            </div>
        </div>

        <div style="margin: 5px 0;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span>Part 11:</span>
                <span>35.5236</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" style="width: 3552.4%"></div>
            </div>
        </div>

        <div style="margin: 5px 0;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span>Part 4:</span>
                <span>28.5849</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" style="width: 2858.5%"></div>
            </div>
        </div>

        <div style="margin: 5px 0;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span>Part 6:</span>
                <span>26.7549</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" style="width: 2675.5%"></div>
            </div>
        </div>

        <div style="margin: 5px 0;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span>Part 1:</span>
                <span>10.0903</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" style="width: 1009.0%"></div>
            </div>
        </div>

        <div style="margin: 5px 0;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span>Part 9:</span>
                <span>0.2987</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" style="width: 29.9%"></div>
            </div>
        </div>

        <div style="margin: 5px 0;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span>Part 16:</span>
                <span>0.1170</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" style="width: 11.7%"></div>
            </div>
        </div>

        <div style="margin: 5px 0;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span>Part 10:</span>
                <span>0.0126</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" style="width: 1.3%"></div>
            </div>
        </div>

        <div style="margin: 5px 0;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span>Part 5:</span>
                <span>0.0000</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" style="width: 0.0%"></div>
            </div>
        </div>
                    </div>
                </div>
                
                <div class="analysis-card">
                    <h3>üìÅ File References</h3>
                    <div class="data-item">
                        <span class="data-label" data-tooltip="Original Smart-Game-Format game file from which this position was extracted.">SGF File: <span class="tooltip-icon">‚ìò</span></span>
                        <span class="data-value"><a href="#">Human Game</a></span>
                    </div>
                    <div class="data-item">
                        <span class="data-label" data-tooltip="NumPy binary file containing the encoded board tensor used as input to the model.">Board Tensor: <span class="tooltip-icon">‚ìò</span></span>
                        <span class="data-value"><a href="#">N/A</a></span>
                    </div>
                    <div class="data-item">
                        <span class="data-label" data-tooltip="Compressed KataGo self-play NPZ file that provided raw tensors and move statistics for this position.">NPZ Source: <span class="tooltip-icon">‚ìò</span></span>
                        <span class="data-value"><a href="#">Human Game Data</a></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Initialize Besogo after page load
        document.addEventListener('DOMContentLoaded', function() {
            besogo.autoInit();
            console.log('Besogo Go board initialized for position 6');
            
            // Track current move as user navigates through the game
            const currentMoveDisplay = document.getElementById('current-move-display');
            
            // Store the initial turn number from analysis data
            const initialTurnNumber = 6;
            
            // Function to calculate move number from root to current node
            function calculateMoveNumber(editor) {
                if (!editor || !editor.getCurrent || !editor.getRoot) return initialTurnNumber;
                
                const root = editor.getRoot();
                const current = editor.getCurrent();
                if (!root || !current) return initialTurnNumber;
                
                let moveNumber = 0;
                let node = current;
                
                // Count moves from current node back to root
                while (node && node !== root) {
                    if (node.move) {
                        moveNumber++;
                    }
                    node = node.parent;
                }
                
                // Return the actual move number (this is correct - Turn 0 = initial position, Turn 1 = first move, etc.)
                return moveNumber;
            }
            
            // Function to update current move display
            function updateCurrentMove() {
                const besogoViewer = document.querySelector('.besogo-viewer');
                if (!besogoViewer || !besogoViewer.besogoEditor) return;
                
                const editor = besogoViewer.besogoEditor;
                const moveNumber = calculateMoveNumber(editor);
                currentMoveDisplay.textContent = `Turn ${moveNumber}`;
            }
            
            // Wait for Besogo to initialize and then set up the listener
            function setupBesogoListener() {
                const besogoViewer = document.querySelector('.besogo-viewer');
                if (!besogoViewer || !besogoViewer.besogoEditor) {
                    // Try again immediately if Besogo isn't ready yet
                    setTimeout(setupBesogoListener, 50);
                    return;
                }
                
                const editor = besogoViewer.besogoEditor;
                
                // Add listener for navigation changes
                editor.addListener(function(msg) {
                    if (msg.navChange) {
                        updateCurrentMove();
                    }
                });
                
                // Initial update - use the correct turn number from analysis data
                currentMoveDisplay.textContent = `Turn ${initialTurnNumber}`;
            }
            
            // Start setup immediately without delay
            setupBesogoListener();
            
            // Keyboard navigation for position navigation
            document.addEventListener('keydown', function(event) {
                // Only handle arrow keys if not typing in an input field
                if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA') {
                    return;
                }
                
                switch(event.key) {
                    case 'ArrowLeft':
                        // Navigate to previous position
                        const prevLink = document.querySelector('a[href="pos_5_part0_rank1_analysis.html"]');
                        if (prevLink && !prevLink.hasAttribute('style')) {
                            event.preventDefault();
                            window.location.href = prevLink.href;
                        }
                        break;
                    case 'ArrowRight':
                        // Navigate to next position
                        const nextLink = document.querySelector('a[href="pos_7_part0_rank1_analysis.html"]');
                        if (nextLink && !nextLink.hasAttribute('style')) {
                            event.preventDefault();
                            window.location.href = nextLink.href;
                        }
                        break;
                }
            });
        });
    </script>
</body>
</html>